# 매매 내역에 날짜 표시 기능 추가

## 📅 작업 일시
**2025-11-26**

---

## 🎯 작업 배경

매매 목록에 날짜 정보가 없어 언제 매매했는지 알 수 없어 불편했습니다. 진입일과 청산일을 표시하여 사용자가 매매 시점을 쉽게 파악할 수 있도록 개선했습니다.

---

## 💡 기술적 결정 사항

### 1. 날짜 표시 방식

**선택**: 상대 시간 + 정확한 날짜 조합

**이유**:
- ✅ **직관성**: "5일 전"으로 빠르게 파악
- ✅ **정확성**: "(11/20 14:30)"으로 정확한 시간 확인
- ✅ **공간 효율**: 두 줄로 표시하여 테이블 너비 유지
- ✅ **사용자 경험**: 한눈에 파악 + 상세 정보 제공

### 2. 상대 시간 단위

- 1분 미만: "방금 전"
- 1시간 미만: "N분 전"
- 24시간 미만: "N시간 전"
- 7일 미만: "N일 전"
- 4주 미만: "N주일 전"
- 그 이상: "N개월 전"

---

## 🛠 구현 내용

### 1. 생성된 파일 (1개)

#### 📄 [utils/dateUtils.ts](file:///c:/workdir/space-cap/trading-journal/frontend/src/utils/dateUtils.ts)
- 상대 시간 계산 함수 (`formatRelativeTime`)
- 날짜 포맷 함수 (`formatDateTime`)

**주요 함수**:
```typescript
// 상대 시간: "5일 전", "1주일 전"
formatRelativeTime(dateString: string, t: TFunction): string

// 정확한 날짜: "11/20 14:30"
formatDateTime(dateString: string): string
```

---

### 2. 수정된 파일 (3개)

#### [TradeList.tsx](file:///c:/workdir/space-cap/trading-journal/frontend/src/components/TradeList.tsx)
**변경 사항**:
- 진입일 컬럼 추가
- 청산일 컬럼 추가
- 상대 시간 + 정확한 날짜 표시

**UI 구조**:
```tsx
<td className="p-2">
  {trade.entryDate ? (
    <div className="text-sm">
      <div className="font-medium">{formatRelativeTime(trade.entryDate, t)}</div>
      <div className="text-xs text-gray-500">({formatDateTime(trade.entryDate)})</div>
    </div>
  ) : (
    <span className="text-gray-400">-</span>
  )}
</td>
```

#### [locales/ko.json](file:///c:/workdir/space-cap/trading-journal/frontend/src/locales/ko.json)
**추가된 번역**:
```json
{
  "relativeTime": {
    "justNow": "방금 전",
    "minutesAgo": "{{count}}분 전",
    "hoursAgo": "{{count}}시간 전",
    "daysAgo": "{{count}}일 전",
    "weeksAgo": "{{count}}주일 전",
    "monthsAgo": "{{count}}개월 전"
  }
}
```

#### [locales/en.json](file:///c:/workdir/space-cap/trading-journal/frontend/src/locales/en.json)
**추가된 번역**:
```json
{
  "relativeTime": {
    "justNow": "Just now",
    "minutesAgo": "{{count}}m ago",
    "hoursAgo": "{{count}}h ago",
    "daysAgo": "{{count}}d ago",
    "weeksAgo": "{{count}}w ago",
    "monthsAgo": "{{count}}mo ago"
  }
}
```

---

## 📊 변경 통계

### 파일 변경
- **신규 생성**: 1개 (dateUtils.ts)
- **수정**: 3개 (TradeList.tsx, ko.json, en.json)

### 코드 라인
- **추가**: 약 80줄

### 번역 항목
- **추가된 번역 키**: 6개 (상대 시간 관련)

---

## 🎨 UI 개선

### Before (날짜 없음)
```
종목  진입가  수량  손익    작업
AAPL  150    10    +48.5   [버튼들]
TSLA  200    5     -       [버튼들]
```

### After (날짜 표시)
```
종목  진입일        청산일        진입가  수량  손익    작업
AAPL  5일 전        방금 전       150    10    +48.5   [버튼들]
      (11/20 14:30) (11/25 09:15)

TSLA  1주일 전      -             200    5     -       [버튼들]
      (11/18 10:00)
```

---

## ✅ 테스트 결과

### 기능 테스트
1. ✅ 진입일 상대 시간 표시 확인
2. ✅ 청산일 상대 시간 표시 확인
3. ✅ 정확한 날짜 표시 확인
4. ✅ 청산되지 않은 매매는 "-" 표시
5. ✅ 한글/영문 번역 확인

### 상대 시간 테스트
- ✅ 방금 추가: "방금 전"
- ✅ 1시간 전: "1시간 전"
- ✅ 3일 전: "3일 전"
- ✅ 1주일 전: "1주일 전"

---

## 🎓 회고

### 잘한 점
1. ✅ **직관적 표시**: 상대 시간으로 빠른 파악 가능
2. ✅ **정확성 유지**: 정확한 날짜도 함께 표시
3. ✅ **깔끔한 UI**: 두 줄로 표시하여 테이블 너비 유지
4. ✅ **다국어 지원**: 한글/영문 모두 지원

### 개선할 점
1. ⚠️ **날짜 정렬**: 날짜 컬럼 클릭 시 정렬 기능 추가 고려
2. ⚠️ **보유 기간**: 진입일~청산일 기간 표시 고려
3. ⚠️ **타임존**: 사용자 타임존 고려 필요
4. ⚠️ **실시간 업데이트**: "방금 전"이 자동으로 업데이트되지 않음

### 배운 점
1. 💡 **상대 시간 계산**: JavaScript Date 객체 활용
2. 💡 **i18next 변수**: `{{count}}` 변수 사용법
3. 💡 **조건부 렌더링**: 날짜가 없을 때 처리

---

## 🚀 향후 작업

### 단기 개선 사항
- [ ] 날짜 컬럼 정렬 기능
- [ ] 보유 기간 표시
- [ ] 툴팁으로 상세 정보 표시

### 중기 확장
- [ ] 날짜 필터링 (기간별 조회)
- [ ] 날짜 포맷 사용자 설정
- [ ] 타임존 지원

---

## 📚 참고 자료

- [JavaScript Date Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)
- [i18next Interpolation](https://www.i18next.com/translation-function/interpolation)

---

**작성자**: Antigravity AI  
**작업 완료일**: 2025-11-26  
**소요 시간**: 약 40분  
**난이도**: ⭐⭐⭐ (중)
